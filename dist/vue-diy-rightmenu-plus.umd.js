(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("vue")):typeof define=="function"&&define.amd?define(["vue"],s):(e=typeof globalThis<"u"?globalThis:e||self,e.vueDiyRightmenuPlus=s(e.Vue))})(this,function(e){"use strict";const s={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(n){return(a,l)=>{const i=e.resolveComponent("el-icon");return n.iconObj.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.iconObj.icon),e.normalizeProps(e.mergeProps({key:0},n.iconObj.attrs)),null,16)):n.iconObj.type==="el"?(e.openBlock(),e.createBlock(i,e.normalizeProps(e.mergeProps({key:1},n.iconObj.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.iconObj.icon)))]),_:1},16)):n.iconObj.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.iconObj.icon]},n.iconObj.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.iconObj.type},n.iconObj.attrs),e.toDisplayString(n.iconObj.icon),17))}}},x="",B=["onContextmenu"],b={key:0,class:"menu-list"},h=["onClick"],g={class:"item-title"},O=["onClick"],j=[{__name:"index",props:{groupList:{type:Array,default:()=>[]},list:{type:Array,default:()=>[{label:"编辑",value:"编辑value",icon:{icon:"√"}},{label:"删除",value:"删除value"}]},props:{type:Object,default:()=>({})},hideOnClick:{type:Boolean,default:!0}},emits:["menuClick","popShow","popClose"],setup(n,{emit:a}){const l=n,i=e.ref(!1),m=e.ref({left:"9999px",top:"9999px"}),o=e.ref({name:l.props.name||"name",data:l.props.data||"data",label:l.props.label||"label",value:l.props.value||"value",icon:l.props.icon||"icon"}),f=(t,u)=>{let c=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;for(;t&&!c.call(t,u);)t=t.parentElement;return t},C=()=>{f(event.target,".menu-content")===null&&(document.body.click(),m.value.left=event.clientX+"px",m.value.top=event.clientY+"px",i.value=!0,a("popShow"))},p=()=>{(l.hideOnClick||f(event.target,".menu-content")===null)&&(i.value=!1,a("popClose"))};e.watch(i,()=>{i.value?document.body.addEventListener("click",p):document.body.removeEventListener("click",p)}),e.onBeforeUnmount(()=>{document.body.removeEventListener("click",p)});const y=t=>{a("menuClick",t)};return(t,u)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-diy-rightmenu-plus",onContextmenu:e.withModifiers(C,["prevent"])},[e.renderSlot(t.$slots,"default"),e.unref(i)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"menu-content",style:e.normalizeStyle(e.unref(m))},[n.list.length>0?(e.openBlock(),e.createElementBlock("div",b,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,(c,d)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:r=>y(c[e.unref(o).value]),key:d},[c[e.unref(o).icon]&&(c[e.unref(o).icon].icon||c[e.unref(o).icon].type)?(e.openBlock(),e.createBlock(s,{key:0,iconObj:c[e.unref(o).icon]},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(c[e.unref(o).label]),1)],8,h))),128))])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(n.groupList,(c,d)=>(e.openBlock(),e.createElementBlock("div",{class:"menu-group-list",key:d},[e.createElementVNode("p",g,e.toDisplayString(c[e.unref(o).name]),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c[e.unref(o).data],(r,E)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:S=>y(r[e.unref(o).value]),key:E},[r[e.unref(o).icon]&&(r[e.unref(o).icon].icon||r[e.unref(o).icon].type)?(e.openBlock(),e.createBlock(s,{key:0,iconObj:r[e.unref(o).icon]},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(r[e.unref(o).label]),1)],8,O))),128))]))),128))],4)):e.createCommentVNode("",!0)],40,B))}}],k={install(n){j.forEach(a=>{n.component("vueDiyRightmenuPlus",a)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(k),k});
