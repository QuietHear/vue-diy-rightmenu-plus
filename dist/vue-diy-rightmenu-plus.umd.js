(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.vueDiyRightmenuPlus=r(e.Vue))})(this,function(e){"use strict";const r="",h=["onContextmenu"],C={key:0,class:"menu-list"},g=["onClick"],_={class:"item-title"},E=["onClick"],w=[{__name:"index",props:{groupList:{type:Array,default:()=>[]},list:{type:Array,default:()=>[{label:"\u7F16\u8F91",value:"\u7F16\u8F91value",icon:{icon:"\u221A"}},{label:"\u5220\u9664",value:"\u5220\u9664value"}]},props:{type:Object,default:()=>({})},hideOnClick:{type:Boolean,default:!0}},emits:["menuClick","popShow","popClose"],setup(c,{emit:i}){const a=c,s=e.ref(!1),k=e.ref({left:"9999px",top:"9999px"}),o=e.ref({name:a.props.name||"name",data:a.props.data||"data",label:a.props.label||"label",value:a.props.value||"value",icon:a.props.icon||"icon"}),u=(l,f)=>{let p=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector;for(;l&&!p.call(l,f);)l=l.parentElement;return l},x=()=>{u(event.target,".menu-content")===null&&(k.value.left=event.clientX+"px",k.value.top=event.clientY+"px",s.value=!0,i("popShow"))},m=()=>{(a.hideOnClick||u(event.target,".menu-content")===null)&&(s.value=!1,i("popClose"))};e.watch(s,()=>{s.value?document.body.addEventListener("click",m):document.body.removeEventListener("click",m)}),e.onBeforeUnmount(()=>{document.body.removeEventListener("click",m)});const B=l=>{i("menuClick",l)};return(l,f)=>{const p=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:"vue-diy-rightmenu-plus",onContextmenu:e.withModifiers(x,["prevent"])},[e.renderSlot(l.$slots,"default"),s.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"menu-content",style:e.normalizeStyle(k.value)},[c.list.length>0?(e.openBlock(),e.createElementBlock("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.list,(n,d)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:t=>B(n[o.value.value]),key:d},[n[o.value.icon]&&(n[o.value.icon].icon||n[o.value.icon].type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n[o.value.icon].type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.icon].icon),{key:0})):n[o.value.icon].type==="el"?(e.openBlock(),e.createBlock(p,{key:1},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.icon].icon)))]),_:2},1024)):n[o.value.icon].type==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(["icon iconfont","icon-"+n[o.value.icon].icon])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(n[o.value.icon].type)},e.toDisplayString(n[o.value.icon].icon),3))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n[o.value.label]),1)],8,g))),128))])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(c.groupList,(n,d)=>(e.openBlock(),e.createElementBlock("div",{class:"menu-group-list",key:d},[e.createElementVNode("p",_,e.toDisplayString(n[o.value.name]),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n[o.value.data],(t,S)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:D=>B(t[o.value.value]),key:S},[t[o.value.icon]&&(t[o.value.icon].icon||t[o.value.icon].type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t[o.value.icon].type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t[o.value.icon].icon),{key:0})):t[o.value.icon].type==="el"?(e.openBlock(),e.createBlock(p,{key:1},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t[o.value.icon].icon)))]),_:2},1024)):t[o.value.icon].type==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(["icon iconfont","icon-"+t[o.value.icon].icon])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(t[o.value.icon].type)},e.toDisplayString(t[o.value.icon].icon),3))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t[o.value.label]),1)],8,E))),128))]))),128))],4)):e.createCommentVNode("",!0)],40,h)}}}],y={install(c){w.forEach(i=>{c.component("vueDiyRightmenuPlus",i)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(y),y});
