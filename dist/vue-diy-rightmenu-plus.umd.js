(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("vue")):typeof define=="function"&&define.amd?define(["vue"],s):(e=typeof globalThis<"u"?globalThis:e||self,e.vueDiyRightmenuPlus=s(e.Vue))})(this,function(e){"use strict";const s="",g=["onContextmenu"],h={key:0,class:"menu-list"},C=["onClick"],_={class:"item-title"},E=["onClick"],w=[{__name:"index",props:{groupList:{type:Array,default:()=>[]},list:{type:Array,default:()=>[{label:"\u7F16\u8F91",value:"\u7F16\u8F91value",icon:{icon:"\u221A"}},{label:"\u5220\u9664",value:"\u5220\u9664value"}]},props:{type:Object,default:()=>({})},hideOnClick:{type:Boolean,default:!0}},emits:["menuClick","popShow","popClose"],setup(c,{emit:r}){const a=c,i=e.ref(!1),m=e.ref({left:"9999px",top:"9999px"}),o=e.ref({name:a.props.name||"name",data:a.props.data||"data",label:a.props.label||"label",value:a.props.value||"value",icon:a.props.icon||"icon"}),u=(l,f)=>{let p=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector;for(;l&&!p.call(l,f);)l=l.parentElement;return l},x=()=>{u(event.target,".menu-content")===null&&(m.value.left=event.clientX+"px",m.value.top=event.clientY+"px",i.value=!0,r("popShow"))},k=()=>{(a.hideOnClick||u(event.target,".menu-content")===null)&&(i.value=!1,r("popClose"))};e.watch(i,()=>{i.value?document.body.addEventListener("click",k):document.body.removeEventListener("click",k)}),e.onBeforeUnmount(()=>{document.body.removeEventListener("click",k)});const B=l=>{r("menuClick",l)};return(l,f)=>{const p=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:"vue-diy-rightmenu-plus",onContextmenu:e.withModifiers(x,["prevent"])},[e.renderSlot(l.$slots,"default"),i.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"menu-content",style:e.normalizeStyle(m.value)},[c.list.length>0?(e.openBlock(),e.createElementBlock("div",h,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.list,(n,d)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:t=>B(n[o.value.value]),key:d},[n[o.value.icon]&&(n[o.value.icon].icon||n[o.value.icon].type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n[o.value.icon].type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.icon].icon),e.normalizeProps(e.mergeProps({key:0},n[o.value.icon].attrs)),null,16)):n[o.value.icon].type==="el"?(e.openBlock(),e.createBlock(p,e.normalizeProps(e.mergeProps({key:1},n[o.value.icon].attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.icon].icon)))]),_:2},1040)):n[o.value.icon].type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n[o.value.icon].icon]},n[o.value.icon].attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n[o.value.icon].type},n[o.value.icon].attrs),e.toDisplayString(n[o.value.icon].icon),17))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n[o.value.label]),1)],8,C))),128))])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(c.groupList,(n,d)=>(e.openBlock(),e.createElementBlock("div",{class:"menu-group-list",key:d},[e.createElementVNode("p",_,e.toDisplayString(n[o.value.name]),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n[o.value.data],(t,P)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:b=>B(t[o.value.value]),key:P},[t[o.value.icon]&&(t[o.value.icon].icon||t[o.value.icon].type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t[o.value.icon].type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t[o.value.icon].icon),e.normalizeProps(e.mergeProps({key:0},t[o.value.icon].attrs)),null,16)):t[o.value.icon].type==="el"?(e.openBlock(),e.createBlock(p,e.normalizeProps(e.mergeProps({key:1},t[o.value.icon].attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t[o.value.icon].icon)))]),_:2},1040)):t[o.value.icon].type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+t[o.value.icon].icon]},t[o.value.icon].attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:t[o.value.icon].type},t[o.value.icon].attrs),e.toDisplayString(t[o.value.icon].icon),17))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t[o.value.label]),1)],8,E))),128))]))),128))],4)):e.createCommentVNode("",!0)],40,g)}}}],y={install(c){w.forEach(r=>{c.component("vueDiyRightmenuPlus",r)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(y),y});
