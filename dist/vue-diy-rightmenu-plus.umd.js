(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.vueDiyRightmenuPlus=r(e.Vue))})(this,function(e){"use strict";const r="",h=["onContextmenu"],C={key:0,class:"menu-list"},g=["onClick"],_={class:"item-title"},E=["onClick"],w=[{__name:"index",props:{groupList:{type:Array,default:()=>[]},list:{type:Array,default:()=>[{label:"\u7F16\u8F91",value:"\u7F16\u8F91value",icon:"el/Apple"},{label:"\u5220\u9664",value:"\u5220\u9664value"}]},props:{type:Object,default:()=>({})},hideOnClick:{type:Boolean,default:!0}},emits:["menuClick","popShow","popClose"],setup(a,{emit:s}){const c=a,i=e.ref(!1),m=e.ref({left:"9999px",top:"9999px"}),o=e.ref({name:c.props.name||"name",data:c.props.data||"data",label:c.props.label||"label",value:c.props.value||"value",customIcon:c.props.customIcon||"customIcon",icon:c.props.icon||"icon"}),y=(t,f)=>{let p=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;for(;t&&!p.call(t,f);)t=t.parentElement;return t},x=()=>{y(event.target,".menu-content")===null&&(m.value.left=event.clientX+"px",m.value.top=event.clientY+"px",i.value=!0,s("popShow"))},k=()=>{(c.hideOnClick||y(event.target,".menu-content")===null)&&(i.value=!1,s("popClose"))};e.watch(i,()=>{i.value?document.body.addEventListener("click",k):document.body.removeEventListener("click",k)}),e.onBeforeUnmount(()=>{document.body.removeEventListener("click",k)});const B=t=>{s("menuClick",t)};return(t,f)=>{const p=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:"vue-diy-rightmenu-plus",onContextmenu:e.withModifiers(x,["prevent"])},[e.renderSlot(t.$slots,"default"),i.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"menu-content",style:e.normalizeStyle(m.value)},[a.list.length>0?(e.openBlock(),e.createElementBlock("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.list,(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:n=>B(l[o.value.value]),key:d},[l[o.value.customIcon]||l[o.value.icon]?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l[o.value.customIcon]?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l[o.value.customIcon]),{key:0})):l[o.value.icon].split("/")[0]==="el"?(e.openBlock(),e.createBlock(p,{key:1},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l[o.value.icon].split("/")[1])))]),_:2},1024)):l[o.value.icon].split("/")[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(["icon iconfont","icon-"+l[o.value.icon].split("/")[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(l[o.value.icon].split("/")[0])},e.toDisplayString(l[o.value.icon].split("/")[1]),3))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(l[o.value.label]),1)],8,g))),128))])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(a.groupList,(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:"menu-group-list",key:d},[e.createElementVNode("p",_,e.toDisplayString(l[o.value.name]),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l[o.value.data],(n,S)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:D=>B(n[o.value.value]),key:S},[n[o.value.customIcon]||n[o.value.icon]?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n[o.value.customIcon]?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.customIcon]),{key:0})):n[o.value.icon].split("/")[0]==="el"?(e.openBlock(),e.createBlock(p,{key:1},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n[o.value.icon].split("/")[1])))]),_:2},1024)):n[o.value.icon].split("/")[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(["icon iconfont","icon-"+n[o.value.icon].split("/")[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(n[o.value.icon].split("/")[0])},e.toDisplayString(n[o.value.icon].split("/")[1]),3))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n[o.value.label]),1)],8,E))),128))]))),128))],4)):e.createCommentVNode("",!0)],40,h)}}}],u={install(a){w.forEach(s=>{a.component("vueDiyRightmenuPlus",s)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(u),u});
